> 해당 글은 혼자 공부하는 컴퓨터구조+운영체제를 정리한 내용입니다.

# Chapter 08 입출력장치

## 1. 장치 컨트롤러와 장치 드라이버

* 다양한 외부 장치가 컴퓨터 내부와 어떻게 연결되고 소통하는지 학습
* 입출력장치를 설명할 때 보조기억장치도 포함하여 설명

### 장치 컨트롤러
CPU, 메모리보다 입출력장치가 다루기 더 까다로운 이유
* 종류가 많음
    1. 장치마다 속도, 데이터 전송 형식 등 다양
    2. 다양한 입출력장치와 정보를 주고받는 방식 규격화 어려움
* 일반적으로 CPU와 메모리의 데이터 전송률은 높고, 입출력장치의 데이터 전송률은 낮음
    * 전송률: 데이터를 얼마나 빨리 교환할 수 있는지를 나타내는 지표

장치 컨트롤러
* 입출력장치는 컴퓨터에 직접 연결되지 않고 장치 컨트롤러라는 하드웨어를 통해 연결
* 입출력장치는 각자의 장치 컨트롤러를 통해 컴퓨터 내부와 정보를 주고받고, 장치 컨트롤러는 하나 이상의 입출력장치와 연결되어 있음

장치 컨트롤러의 역할
* CPU와 입출력장치 간의 통신 중개
* 오류 검출
* 데이터 버퍼링
    * 버퍼링: 전송률이 높은 장치와 낮은 장치 사이에 주고받는 데이터를 버퍼라는 임시 저장 공간에 저장하여 전송률을 비슷하게 맞추는 방법

장치 컨트롤러의 구조
* 데이터 레지스터
    * CPU와 입출력장치 사이에 주고받을 데이터가 담기는 레지스터
    * 버퍼 역할
* 상태 레지스터
    * 입출력장치가 입출력 작업을 할 준비가 되었는지, 입출력 작업이 완료되었는지, 입출력장치에 오류는 없는지 등의 상태 정보가 저장
* 제어 레지스터
    * 입출력장치가 수행할 내용에 대한 제어 정보와 명령을 저장

### 장치 드라이버
* 장치 컨트롤러의 동작을 감지하고 제어함으로써 장치 컨트롤러가 컴퓨터 내부와 정보를 주고받을 수 있게 하는 프로그램
* 실행 과정에서 메모리에 저장
* 장치 드라이버를 인식하고 실행하는 주체는 운영체제

## 2. 다양한 입출력 방법

* 입출력 작업을 수행하기 위해 장치 컨트롤러와 CPU가 어떻게 정보를 주고받는지를 학습

### 프로그램 입출력
* 프로그램 속 명령어로 입출력장치를 제어하는 방법
* CPU가 프로그램 속 명령어를 실행하는 과정에서 입출력 명령어를 만나면 CPU는 입출력장치에 연결된 장치 컨트롤러와 상호작용하며 입출력 작업을 수행

메모리 맵 입출력
* 메모리에 접근하기 위한 주소 공간과 입출력장치에 접근하기 위한 주소 공간을 하나의 주소 공간으로 간주하는 방법

고립형 입출력
* 메모리를 위한 주소 공간과 입출력장치를 위한 주소 공간을 분리하는 방법

### 인터럽트 기반 입출력
* 인터럽트를 기반으로 하는 입출력
* 여러 입출력장치에서 인터럽트가 동시에 발생한 경우에는 발생한 순서대로 인터럽트를 처리할 수 있음
* 플래그 레지스터 속 인터럽트 비트가 활성화되어 있는 경우, 혹은 NMI가 발생한 경우 우선순위가 높은 인터럽트부터 처리
* PIC 하드웨어를 통해 우선순위를 반영하여 다중 인터럽트를 처리

### DMA 입출력
* 입출력장치와 메모리가 CPU를 거치지 않고 직접 메모리에 접근할 수 있는 입출력 기능
* 시스템 버스에 연결된 DMA 컨트롤러라는 하드웨어가 필요
* 입출력 버스
    * 장치 컨트롤러들을 입출력 버스로 DMA 컨트롤러에 연결
    * 시스템 버스의 사용 빈도를 줄일 수 있음